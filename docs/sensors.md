# Debugging Sensors

One of the main components of hwdbg is debugging sensors. This section discusses the debugging sensors implemented in the debugger.

# Sensors in Hardware Debugging

Sensors play an important role in hardware debugging by providing real-time data about the internal state and environmental conditions of hardware systems. They enable precise monitoring and control, helping hardware engineers to identify issues, optimize performance, analyze side-channel attacks, and ensure reliability. In this chapter various types of sensors are explored that are used in hardware debugging, including their functionalities, applications, and integration into hwdbg.

# Side-channel Attacks in Microchips/IP Cores

Hardware side-channel attacks exploit the physical characteristics of microchips and IP cores to extract sensitive information without directly interacting with the system's primary data channels. In these cases, sensors play a key role in facilitating these attacks by providing access and creating data based on characteristics like power consumption, electromagnetic emissions, temperature, and timing, which correlate with specific operations or data being processed. For example, voltage and power sensors can monitor fluctuations in power consumption, which can be analyzed through techniques such as Differential Power Analysis (DPA) to reveal cryptographic keys and other confidential data. Temperature sensors can detect thermal variations caused by different processing states, enabling thermal imaging attacks that indirectly uncover sensitive information.

Time-to-digital converters (TDCs) and frequency sensors can capture high-resolution timing information, allowing attackers to perform timing analysis attacks that exploit the time differences in processing operations to infer secret data. Ring oscillators (RO) can detect minute variations in signal delays caused by different computational activities, facilitating delay-based attacks. Clock sensors can monitor the integrity of clock signals and detect anomalies caused by tampering or glitching attacks aimed at disrupting normal operations to extract sensitive information. By leveraging these sensors, attackers gain access to a wealth of side-channel data that can be analyzed to compromise the security of microchips and IP cores.

As a main component, hwdbg implements these sensors to provide facilities for hardware engineers and security researchers to analyze microchips and IP cores.

![Different Tools and Devices Used to Extract Data From the Chip.](/img/figures/final-side-channel.jpg)

# Physical Unclonable Function (PUF)

A Physical Unclonable Function (PUF) is a physical entity embodied in a physical structure and usually utilized in microchips and other electronic devices to generate unique, device-specific cryptographic keys based on the inherent and uncontrollable physical variations that occur during the [manufacturing process](https://ieeexplore.ieee.org/document/4380646). These unique differences, such as variations in silicon pathways, ensure that each PUF is unique and make it theoretically impossible to duplicate or clone. PUFs provide a robust method for secure authentication and encryption, as the unique response generated by a PUF can be used to verify the identity of a device. Figure below illustrates a simple design of a Ring Oscillator (RO) which is a variant of a PUF device.

![Physical Unclonable Functions (PUFs). (Source: https://ieeexplore.ieee.org/document/8740832)](/img/figures/PUF.png)

# Integrated Debugging Sensors

Now that the importance of sensors in the debugger is described, the following subsections explain different debugging sensors implemented in hwdbg.

## Ring Oscillator (RO)

A ring oscillator is a type of electronic oscillator consisting of an **odd number of inverters** connected in a loop. It generates a periodic oscillating signal by continuously switching states, creating a sequence of voltage pulses. The frequency of this oscillation is influenced by factors such as voltage, temperature, and the manufacturing process, making ring oscillators useful for detecting variations in these parameters. The following figure illustrates a ring oscillator with an odd number of stages.

![An Illustration of a Ring Oscillator (RO). (Source: https://analogcircuitdesign.com/ring-oscillator/)](/img/figures/ring-oscillator.png)

A ring oscillator module is embedded in hwdbg. It 
 involves a circuit with an odd number of inverters. These circuits are often embedded in IP cores and the oscillation result is integrated with hardware debuggers to provide real-time frequency data, helping engineers and security researchers monitor and adjust system state accordingly. These sensors can help detect changes in operating conditions that might affect the performance and reliability of microchips and IP cores.

## Time-to-Digital Converter (TDC)

A Time-to-Digital Converter (TDC) measures time intervals with high precision by converting the time difference between two events into a digital value. 

TDSs are implemented as debugging modules and integrated with hwdbg to provide accurate results about the occurrence of events in the system.

## IDELAYE2/3

IDELAYE3, or Input Delay Element, is a programmable delay line used to manage signal timing and synchronization in digital circuits. It allows precise adjustment of the delay applied to incoming signals, facilitating accurate timing alignment and data capture.

IDELAYE3 is commonly used in high-speed communication interfaces, where precise timing control is critical for maintaining signal integrity and synchronization. By adjusting the delay of incoming signals, IDELAYE3 helps ensure that data is correctly aligned with the clock signals.

![IDELAYE3 Primitive. (Source: https://docs.amd.com/r/en-US/ug571-ultrascale-selectio/IDELAYE3)](/img/figures/X16016-idelaye3-primitive.jpg)

Security researchers can exploit IDELAYE3 components to introduce deliberate delays in signals, [manipulating the timing characteristics of the device](https://arxiv.org/abs/2405.03632). By carefully adjusting these delays, any variations induced in power consumption, electromagnetic emissions, or timing of an IP core can be observed and analyzed as side-channel leakage. Such attacks can potentially disclose sensitive information, including cryptographic keys or data patterns, by exploiting the unintentional side effects of signal manipulation facilitated by IDELAYE3. Thus, IDELAYE3 is also added as a debugging component to hwdbg. Figure below shows a chain of IDELAYE components used to adjust the clock signal delay.

![IDELAYE2 Configuration.](/img/figures/idelay.jpg)

## Voltage Sensor

Voltage sensors monitor the voltage levels within a hardware system, providing data for maintaining optimal operation and preventing damage from overvoltage or undervoltage conditions. 

The usage of these sensors is also integrated in hwdbg to provide researchers with further details about the internals of a microchip or an IP core. 

## Frequency Sensor

Frequency sensors measure the operating frequency of hardware components, which ensures that they function within specified parameters. Accurate frequency measurement is essential for verifying clock signals and maintaining synchronization across the system.

Frequency sensors detect the frequency of oscillating signals by counting the number of cycles within a specific time period. This data is then processed to determine the operating frequency accurately. These sensors are also another source of data for analyzing the internal condition of debuggee.

## Temperature sensor

As their name implies, temperature sensors provide details about the thermal state of hardware components, and thermal stability. 

Temperature sensors are integrated into the hardware debugger to provide continuous thermal monitoring. In hardware debugging, they help identify thermal hotspots and enable dynamic thermal management strategies to possibly leak data from the target debuggee.

## Clock Sensor

Clock sensors monitor and verify clock signals within a hardware system. Accurate clock signals are critical for timing and synchronization, and clock sensors help ensure that these signals remain within specified tolerances.

![Clock Sensor.](/img/figures/1lut-blockdiagram.jpg)

Clock sensors utilize techniques such as phase-locked loops (PLLs) and clock distribution networks to monitor clock frequencies and phases. These techniques help detect discrepancies and maintain synchronization across the system. These sensors are also another source of data for hwdbg.

# Comparative Analysis of Sensors

Comparing different sensors involves evaluating performance metrics such as accuracy, resolution, power consumption, response time, and operating range. Each sensor type has its strengths and weaknesses, making them suitable for different applications.

The suitability of each sensor type depends on the specific requirements of the debugging task. For example, TDCs are ideal for high-precision timing measurements, while voltage sensors are essential for power management and stability.

Common challenges in sensor integration include calibration, environmental compensation, power efficiency, and data interpretation.

A combination of results gathered from these sensors can be used to determine the internal state of the debuggee, providing security researchers and hardware engineers with meaningful data to interpret the internal conditions of the target device or IP core.